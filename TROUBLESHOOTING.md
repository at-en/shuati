# 刷题系统故障排除指南

## 常见浏览器错误及解决方案

### 1. JavaScript错误

#### 问题症状
- 浏览器控制台显示JavaScript错误
- 页面功能不正常
- 数据显示异常

#### 解决方案
已修复的问题：
- 添加了空值检查防止`undefined.toFixed()`错误
- 添加了HTML转义防止XSS攻击
- 改进了错误处理机制

### 2. 网络连接问题

#### 问题症状
- API请求失败
- 页面无法加载
- 登录失败

#### 诊断步骤
1. 确认服务器正在运行：
   ```bash
   ./quiz-system
   ```

2. 检查端口是否被占用：
   ```bash
   netstat -an | findstr 50442
   ```

3. 使用诊断页面测试：
   打开浏览器访问 `http://localhost:50442/diagnose.html`

### 3. 数据库问题

#### 问题症状
- 题目无法加载
- 用户无法注册
- 数据保存失败

#### 解决方案
1. 检查questions.json文件是否存在
2. 删除quiz.db文件重新初始化：
   ```bash
   rm quiz.db
   ./quiz-system
   ```

3. 查看服务器日志确认数据导入状态

### 4. 编译问题

#### 问题症状
- go build失败
- 模块找不到

#### 解决方案
1. 确保Go模块正确初始化：
   ```bash
   go mod tidy
   ```

2. 使用正确的编译命令：
   ```bash
   go build -o quiz-system main.go
   ```

## 快速诊断清单

### 服务器端检查
- [ ] quiz-system进程正在运行
- [ ] 端口50442未被占用
- [ ] questions.json文件存在
- [ ] quiz.db数据库文件正常

### 客户端检查
- [ ] 浏览器支持现代JavaScript
- [ ] 网络连接正常
- [ ] 浏览器控制台无错误
- [ ] Cookie和本地存储启用

### 文件完整性检查
- [ ] static/index.html存在
- [ ] static/app.js存在且已修复
- [ ] 所有Go源文件完整

## 性能优化建议

### 1. 缓存优化
- 预加载热门题目
- 合理设置缓存过期时间
- 监控缓存命中率

### 2. 数据库优化
- 定期清理过期会话
- 优化查询索引
- 使用连接池

### 3. 前端优化
- 压缩静态资源
- 使用CDN加速
- 实现懒加载

## 监控和维护

### 日志监控
```bash
# 查看实时日志
tail -f quiz.log

# 查看错误日志
grep ERROR quiz.log
```

### 性能监控
```bash
# 检查内存使用
ps aux | grep quiz-system

# 检查磁盘使用
du -sh quiz.db
```

### 定期维护
- 每周备份数据库
- 每月清理日志文件
- 定期更新依赖包

## 联系支持

如果问题仍然存在，请提供以下信息：
1. 错误信息截图
2. 浏览器控制台日志
3. 服务器运行日志
4. 系统环境信息

---

**注意**: 本指南基于当前系统版本，如有更新请及时同步文档。